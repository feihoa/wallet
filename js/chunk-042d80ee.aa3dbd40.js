(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-042d80ee"],{"594d":function(t,a,e){"use strict";e("808e")},"808e":function(t,a,e){},a97d:function(t,a,e){},c05d:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bill"},[e("div",[e("div",{staticClass:"bill__page-title page-title"},[e("h3",{staticClass:"bill__title",staticStyle:{margin:"0"}},[t._v("Счет")]),e("button",{staticClass:"btn waves-effect waves-light btn-small bill__btn-refresh blue lighthen-3",on:{click:t.refresh}},[e("i",{staticClass:"material-icons"},[t._v("autorenew")])])]),t.loading?e("Loader"):e("div",{staticClass:"bill__content"},[e("div",[e("div",{staticClass:"bill__amount"},[e("h6",{staticClass:"bill__evaluation"},[t._v("Текущая оценка портфеля (USD)")]),e("p",{staticClass:"bill__evaluation-amount"},[t._v(t._s(t.totalAmount)+" USD")])]),e("Chart",{key:t.chartKey,attrs:{data:t.chartData}})],1),e("div",{staticClass:"bill__card card blue darken-1 bill-card"},[e("h3",{staticClass:"bill__card-title card-title white-text"},[t._v("Средства")]),e("div",{staticClass:"bill__card-content card-content white-text"},t._l(t.currencies,(function(a){return e("p",{key:a,staticClass:"currency-line"},[e("span",[e("p",{staticClass:"cur-title"},[t._v(t._s(t.base[a]+" "+a)+" ")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount[a],expression:"amount[cur]",modifiers:{number:!0}}],staticClass:"bill__input white-text",attrs:{type:"number",id:"val",placeholder:"введите сумму..."},domProps:{value:t.amount[a]},on:{input:function(e){e.target.composing||t.$set(t.amount,a,t._n(e.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("div",{staticClass:"bill__btns"},[e("a",{staticClass:"bill__btn bill__btn-plus btn-floating btn-large waves-effect waves-light red small",on:{click:function(e){return t.plusSum(a)}}},[e("i",{staticClass:"material-icons",staticStyle:{"line-height":"0px","vertical-align":"text-top"}},[t._v("add")])]),e("a",{staticClass:"bill__btn bill__btn-minus btn-floating btn-large waves-effect waves-light red small",on:{click:function(e){return t.minusSum(a)}}},[e("i",{staticClass:"material-icons",staticStyle:{"line-height":"0px","vertical-align":"text-top"}},[t._v("remove")])])])])])})),0)])])],1),e("hr")])},s=[],n=e("1da1"),r=(e("b680"),e("96cf"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"chart"},[e("div",{staticClass:"chart-container"},[e("h6",{staticClass:"chart__title"},[t._v("Текущее распределение валют, %")]),t.noMoney?e("p",{staticStyle:{"font-weight":"bold"}},[t._v("Нет средств на счету")]):e("pie-chart",{staticClass:"waves-effect pie-chart",attrs:{"chart-data":t.datacollection,options:t.chartOptions}})],1)])}),c=[],l=e("1fca"),o=l["c"].reactiveProp,u={extends:l["b"],mixins:[o],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},h={components:{PieChart:u},props:["data"],data:function(){return{datacollection:{},labels:["USD","BTC","ETH"],noMoney:!1,chartOptions:{responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.fillData()},methods:{fillData:function(){this.data.totalAmount=this.data.totalAmount?this.data.totalAmount:1,this.data.ETH||this.data.BTC||this.data.USD||(this.noMoney=!0),this.datacollection={hoverBackgroundColor:"red",hoverBorderWidth:10,labels:this.labels,datasets:[{label:"Data One",backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1,data:[(this.data.USD/this.data.totalAmount*100).toFixed(2),(this.data.BTC/this.data.totalAmount*100).toFixed(2),(this.data.ETH/this.data.totalAmount*100).toFixed(2)]}]}}}},d=h,b=(e("594d"),e("2877")),m=Object(b["a"])(d,r,c,!1,null,"e5354fba",null),p=m.exports,f={name:"bill",components:{Chart:p},data:function(){return{currencies:["USD","BTC","ETH"],loading:!0,currency:null,base:{BTC:0,ETH:0,USD:0},amount:{BTC:1,ETH:1,USD:1},chartData:{BTC:0,ETH:0,USD:0,totalAmount:1},totalAmount:0,chartKey:0}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("fetchCurrency");case 2:t.currency=a.sent,t.currency.usd={usd:1},t.updateAmount(),t.loading=!1;case 6:case"end":return a.stop()}}),a)})))()},methods:{updateAmount:function(){this.totalAmount=Math.floor(this.base.BTC*this.currency.bitcoin.usd+this.base.ETH*this.currency.ethereum.usd+this.base.USD*this.currency.usd.usd),this.chartData.BTC=this.base.BTC*this.currency.bitcoin.usd,this.chartData.ETH=this.base.ETH*this.currency.ethereum.usd,this.chartData.USD=this.base.USD*this.currency.usd.usd,this.chartData.totalAmount=this.totalAmount,this.chartKey+=1},refresh:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,t.$store.dispatch("fetchCurrency");case 3:t.currency=a.sent,t.currency.usd={usd:1},t.updateAmount(),t.loading=!1;case 7:case"end":return a.stop()}}),a)})))()},plusSum:function(t){this.base[t]=+(this.base[t]+this.amount[t]).toFixed(3),this.updateAmount()},minusSum:function(t){this.base[t]=+(this.base[t]-this.amount[t]).toFixed(3),this.updateAmount()}}},_=f,v=(e("e2f9"),Object(b["a"])(_,i,s,!1,null,null,null));a["default"]=v.exports},e2f9:function(t,a,e){"use strict";e("a97d")}}]);
//# sourceMappingURL=chunk-042d80ee.aa3dbd40.js.map